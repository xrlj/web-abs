<div class="app-header">
  <a [ngClass]="collapsed ? 'brand-fold' : 'brand-unfold'" routerLink="/pages">
    <img src="assets/images/logo.svg" alt="" />
    <span style="color: #fff">{{appName}}</span>
  </a>

  <div [style.margin-left]="sliderMenuThemeChecked ? '0px' : '-1px'" class="menu-collapsed" (click)="toggle()">
    <i nz-icon [nzType]="collapsed ? 'menu-unfold' : 'menu-fold'" nzTheme="outline"></i>
  </div>
  <div class="router-refresh" (click)="routerRefresh();">
    <i nz-icon nzType="reload" nzTheme="outline"></i>
  </div>

  <ul class="nav tools">
    <li class="nav-icon">
      <nz-badge [nzCount]="22" style="color: #fff">
        <i nz-icon nzType="bell" nzTheme="outline"></i>
      </nz-badge>
    </li>
    <li class="nav-icon" (click)="fullScreen()">
      <i nz-icon [nzType]="isFullScreen ? 'fullscreen-exit' : 'fullscreen'" nzTheme="outline"></i>
    </li>
    <li class="nav-icon" (click)="openSettingDrawer()">
      <i nz-icon nzType="setting" nzTheme="outline"></i>
    </li>
  </ul>

  <div class="user">
    <div nz-dropdown [nzDropdownMenu]="menu" [nzPlacement]="'bottomRight'" class="user-name">
<!--      <nz-avatar nzIcon="user"></nz-avatar>-->
      <img src="assets/images/head-small.png" style="height: 32px;width: 32px;"/>
      <span>{{utils.getJwtTokenClaim(jwtKvEnum.Username)}}，欢迎您！</span>
      <i nz-icon nzType="down" style="margin-left: 3px"></i>
    </div>
  </div>

  <nz-dropdown-menu #menu="nzDropdownMenu">
    <ul nz-menu>
      <li nz-menu-item (click)="openUserCentre()">个人中心</li>
      <li nz-menu-item (click)="changeEtpSpace()">切换企业空间</li>
      <li nz-menu-item (click)="logout()">退出登录</li>
    </ul>
  </nz-dropdown-menu>
</div>

<nz-drawer class="setting-drawer" [nzClosable]="false" [nzVisible]="settingVisible" nzPlacement="right" nzTitle="系统设置" (nzOnClose)="closeSettingDrawer()">
  <ng-container *nzDrawerContent>
    <div class="setting-drawer-slider">
      <h4>抽屉菜单</h4>
      <label nz-checkbox (ngModelChange)="asideChangeTheme($event)" [(ngModel)]="sliderMenuThemeChecked">dark 黑色</label>
    </div>
    <nz-divider></nz-divider>
    <div class="setting-drawer-theme">
      <h4>主题色调</h4>
      <nz-radio-group (ngModelChange)="changeTheme($event)" [(ngModel)]="themeRadioValue">
        <label nz-radio [nzValue]="themeEnum.Default">default 默认</label>
        <label nz-radio [nzValue]="themeEnum.Orange">orange 橙色</label>
        <label nz-radio [nzValue]="themeEnum.Turquoise">turquoise 蓝绿色</label>
      </nz-radio-group>
    </div>
    <nz-divider></nz-divider>
    <div class="setting-drawer-theme">
      <h4>融资模式</h4>
      <nz-radio-group (ngModelChange)="changeFinancingMode($event)" [(ngModel)]="financingModeRadioValue">
        <label nz-radio [nzValue]="financingModelEnum.FINANCING_SINGLE">单笔融资</label>
        <label nz-radio [nzValue]="financingModelEnum.FINANCING_MULTIPLE">多笔融资</label>
      </nz-radio-group>
    </div>
  </ng-container>
</nz-drawer>

<nz-modal *ngIf="isShowChangeEtpSpaceModal"
          [(nzVisible)]="isShowChangeEtpSpaceModal"
          [nzWidth]="500"
          [nzMaskClosable]="false"
          nzTitle="切换企业空间"
          (nzOnCancel)="handleEtpSpaceModalCancel()"
          (nzOnOk)="handleEtpSpaceModalOk()"
          [nzOkLoading]="isEtpSpaceModalOkLoading">
  <form nz-form nzLayout="horizontal" [formGroup]="etpSpaceChangeForm" *nzModalContent>
    <nz-form-item>
      <nz-form-label [nzSpan]="6" nzFor="etpSpace" nzRequired>企业和标签</nz-form-label>
      <nz-form-control [nzSpan]="20" nzErrorTip="必填项">
        <nz-select id="etpSpace" formControlName="etpSpace"  ngModel="1">
          <nz-option nzValue="1" nzLabel="慧链通保理-保理商"></nz-option>
          <nz-option nzValue="2" nzLabel="中力保理-保理商"></nz-option>
        </nz-select>
      </nz-form-control>
    </nz-form-item>
  </form>
</nz-modal>
