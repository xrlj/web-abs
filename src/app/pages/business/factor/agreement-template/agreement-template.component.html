<nz-card class="card-list" nzTitle="协议模板管理" *ngIf="showType === 1" [nzExtra]="refreshTemplate">
  <div class="card-list-action">
    <app-agreement-template-search (searchClick)=search($event,true) [searchData]="searchData"></app-agreement-template-search>
  </div>
  <div class="card-list-table">
    <div class="list-btn-action">
      <button (click)="showDetails(1)"
              class="list-btn-action-right"
              nz-button nzType="primary"
              nzSize="small">
        <i nz-icon nzType="plus-circle" nzTheme="outline"></i>新增
      </button>
    </div>
    <nz-table
      #table
      nzShowPagination
      nzShowSizeChanger
      nzBordered
      [nzFrontPagination]="false"
      [nzData]="listOfAllData"
      [nzLoading]="listLoading"
      [nzTotal]="total"
      [(nzPageIndex)]="pageIndex"
      [(nzPageSize)]="pageSize"
      (nzPageIndexChange)="search(searchData)"
      (nzPageSizeChange)="search(searchData, true)"
      [nzScroll]="{ x: '1000px', y: '400px' }"
    >
      <thead>
      <tr>
        <th nzWidth="30px" nzAlign="center">序号</th>
        <th nzWidth="80px" nzAlign="center">合同大类</th>
        <th nzWidth="80px" nzAlign="center">合同类别</th>
        <th nzWidth="50px" nzAlign="center">合同版别</th>
        <th nzWidth="80px" nzAlign="center">合同名称</th>
        <th nzWidth="50px" nzAlign="center">版本号</th>
        <th nzWidth="60px" nzAlign="center">强制阅读时间</th>
        <th nzWidth="50px" nzAlign="center">状态</th>
        <th nzWidth="50px" nzAlign="center">操作人</th>
        <th nzWidth="80px" nzAlign="center">操作时间</th>
        <th nzWidth="120px" nzAlign="center">操作</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let i = index; let data of table['data']">
        <td nzAlign="center">{{i * pageIndex + 1}}</td>
        <td nzAlign="center">{{data.agrTypeBig}}</td>
        <td nzAlign="center">{{data.agrType}}</td>
        <td nzAlign="center">{{data.agrTypeSpecify}}</td>
        <td nzAlign="center">
          <a (click)="openTemplateFile(data.agrFileId)">{{data.agrName}}</a>
        </td>
        <td nzAlign="center">{{data.agrVersion}}</td>
        <td nzAlign="center">{{data.agrTextReadTimeLimit}}</td>
        <td nzAlign="center">{{data.agrStatusName}}</td>
        <td nzAlign="center">{{data.operatorUserName}}</td>
        <td nzAlign="center">{{data.dateCreated}}</td>
        <td nzAlign="center">
          <a (click)="showDetails(2, data)">编辑</a>
          <nz-divider nzType="vertical"></nz-divider>
          <a (click)="showDetails(3, data)">查看</a>
          <nz-divider nzType="vertical"></nz-divider>
          <a (click)="showDetails(4, data)">审核</a>
          <nz-divider nzType="vertical"></nz-divider>
          <a>失效</a>
          <nz-divider nzType="vertical"></nz-divider>
          <a>删除</a>
        </td>
      </tbody>
    </nz-table>
  </div>
</nz-card>

<app-agreement-template-details *ngIf="showType == 2" (showList)="goBackList()" [id]="selectedId" [showType]="detailsType"></app-agreement-template-details>

<ng-template #refreshTemplate>
  <span style="cursor: pointer;" (click)="refreshUI()">
    <i nz-icon [nzType]="'sync'" [nzSpin]="listLoading"></i><!--动态加载的，点击刷新的时候把false改成true-->
    <span style="margin-left: 5px;">刷新</span>
  </span>
</ng-template>
