<nz-card *ngIf="showType === 1" class="card-list" nzTitle="产品列表">
  <!--搜索-->
  <div class="card-list-action">
    <nz-input-group [nzSuffix]="ptNameSuffixTemplate">
      <input type="text" nz-input [(ngModel)]="searchVo.pdtName" placeholder="请输入产品名称"/>
    </nz-input-group>
    <nz-input-group [nzSuffix]="coreEtpNameSuffixTemplate">
      <input type="text" nz-input [(ngModel)]="searchVo.coreEtpName" placeholder="请输入核心企业名称"/>
    </nz-input-group>
    <button nz-button nzType="primary" (click)="search(true)"><i nz-icon nzType="search"></i>搜索</button>
    <button nz-button nzType="primary" [routerLink]="[productAddPath, 0]"><i nz-icon nzType="plus"></i>新增</button>
    <button nz-button nzType="primary" nzDanger (click)="changShowType(2)"><i nz-icon nzType="delete"></i>删除</button>

    <ng-template #ptNameSuffixTemplate
    ><i
      nz-icon
      nz-tooltip
      class="ant-input-clear-icon"
      nzTheme="fill"
      nzType="close-circle"
      *ngIf="searchVo.pdtName"
      (click)="searchVo.pdtName = null"
    ></i
    ></ng-template>
    <ng-template #coreEtpNameSuffixTemplate
    ><i
      nz-icon
      nz-tooltip
      class="ant-input-clear-icon"
      nzTheme="fill"
      nzType="close-circle"
      *ngIf="searchVo.coreEtpName"
      (click)="searchVo.coreEtpName = null"
    ></i
    ></ng-template>
  </div>

  <div class="card-list-table">
    <nz-table
      nzShowPagination
      nzShowSizeChanger
      nzBordered
      [nzFrontPagination]="false"
      [nzData]="listOfAllData"
      [nzLoading]="listLoading"
      [nzTotal]="total"
      [(nzPageIndex)]="pageIndex"
      [(nzPageSize)]="pageSize"
      (nzPageIndexChange)="search()"
      (nzPageSizeChange)="search(true)"
      (nzCurrentPageDataChange)="currentPageDataChange($event)"
    >
      <thead>
      <tr>
        <th
          nzShowCheckbox
          [(nzChecked)]="isAllDisplayDataChecked"
          [nzIndeterminate]="isIndeterminate"
          (nzCheckedChange)="checkAll($event)"
        ></th>
        <th nzWidth="15%" nzAlign="center">产品编号</th>
        <th nzWidth="15%" nzAlign="center">产品名称</th>
        <th nzWidth="15%" nzAlign="center">核心企业</th>
        <th nzWidth="10%" nzAlign="center">产品类别</th>
        <th nzWidth="10%" nzAlign="center">产品状态</th>
        <th nzWidth="15%" nzAlign="center" nzShowSort>创建时间</th>
        <th nzWidth="10%" nzAlign="center">创建人</th>
        <th nzWidth="10%" nzAlign="center">操作</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let data of listOfAllData">
        <td
          nzShowCheckbox
          [(nzChecked)]="mapOfCheckedId[data.id]"
          [nzDisabled]="data.disabled"
          (nzCheckedChange)="refreshStatus()"
        ></td>
        <td nzAlign="center">{{ data.pdtCode }}</td>
        <td nzAlign="center">{{ data.pdtName }}</td>
        <td nzAlign="center">{{ data.coreEtpName }}</td>
        <td nzAlign="center">{{ data.pdtTypeName }}</td>
        <td nzAlign="center">
          <nz-tag [nzColor]="themeHelper.setCommonStatusColor(data.pdtStatus).background"
                  [style.color]="themeHelper.setCommonStatusColor(data.pdtStatus).color"
          >
            {{data.pdtStatusName}}
          </nz-tag>
        </td>
        <td nzAlign="center">{{ data.dateCreated}}</td>
        <td nzAlign="center">{{ data.creatorRealName}}</td>
        <td nzAlign="center" [ngSwitch]="data.pdtStatus">
          <div *ngSwitchCase="0">
            <a>编辑</a>
            <nz-divider nzType="vertical"></nz-divider>
            <a>启用</a>
          </div>
          <div *ngSwitchCase="1">
            <a>查看</a>
            <nz-divider nzType="vertical"></nz-divider>
            <a>停用</a>
          </div>
          <div *ngSwitchCase="2">
            <a>查看</a>
          </div>
        </td>
      </tr>
      </tbody>
    </nz-table>
  </div>
</nz-card>

<app-product-details *ngIf="showType === 2" (showType)="changShowType($event)"></app-product-details>
